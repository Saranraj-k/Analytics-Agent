# AI Data Analytics & Visualization Agent

A lightweight, web app that lets you upload a CSV, run natural-language queries against it using a Pandas-aware LangChain agent, and render visualizations (matplotlib) produced by the agent directly in the UI.
<img width="1906" height="783" alt="image" src="https://github.com/user-attachments/assets/623cec37-147d-4182-9737-bea13ebdea33" />


This README explains what the project does, which tools it uses, how it helps you or your stakeholders, and provides step-by-step instructions to run, test and extend the project. It also includes troubleshooting tips and recommended next steps.

---

# Table of contents

* [Why this project helps](#why-this-project-helps)
* [Features](#features)
* [Tech stack / Tools used](#tech-stack--tools-used)
* [Project structure](#project-structure)
* [Quickstart â€” Run locally](#quickstart--run-locally)

  * [Windows (Command Prompt)](#windows-command-prompt)
  * [macOS / Linux (bash / zsh)](#macos--linux-bash--zsh)
* [Usage â€” UI walkthrough](#usage--ui-walkthrough)
* [Example prompts](#example-prompts)
* [How plotting works (internals)](#how-plotting-works-internals)
* [Screenshots (add yours)](#screenshots-add-yours) ðŸ–¼ï¸
* [Extending the app](#extending-the-app)
* [Security & limitations](#security--limitations) ðŸ”’
* [Troubleshooting](#troubleshooting)
* [License & contribution](#license--contribution)

---

# Why this project helps

* **Fast data exploration** â€” Ask plain-English questions about your dataset (columns, types, summary stats) without writing code.
* **Visual explanations** â€” Request charts (bar/histogram/scatter) and view them inline; great for storytelling in interviews and portfolios.
* **Portfolio-ready demo** â€” A clean UI + working backend you can deploy or present to hiring managers.
* **Extensible** â€” Clear modular code (LLM provider, agent wrapper, utilities, frontend) so you can add features (auth, more charts, async streaming).

---

# Features

* Upload a CSV, provide your Groq API key, choose one of two validated models, then initialize an agent for that dataset.
* Natural-language chat interface for data analysis (uses `create_pandas_dataframe_agent`).
* Automatic capture and serving of matplotlib figures generated by the agent (saved to `/static/generated/` and displayed inline).
* Minimal, attractive frontend with clear controls and a responsive layout.
* In-memory session store (your API key is not persisted to disk).

---

# Tech stack / Tools used

* **LangChain** (agents & dataframe agent)
* **langchain-groq**, **groq** (Groq LLM connector)
* **Flask** (web server)
* **pandas**, **numpy** (data handling)
* **matplotlib** (plotting capture)
* **Werkzeug / Jinja2** (Flask internals & templates)
* **python-dotenv** (optional: load environment variables locally)
* **HTML / CSS / Vanilla JS** (frontend)
* Python 3.10+ recommended

(See `requirements.txt` for exact package versions used in the scaffold.)

---

# Project structure

```
ai-data-agent/
â”œâ”€ app/
â”‚  â”œâ”€ main.py                # Flask entrypoint (self-starting)
â”‚  â”œâ”€ modules/
â”‚  â”‚  â”œâ”€ llm_provider.py     # Groq LLM factory + model validation
â”‚  â”‚  â”œâ”€ agent.py            # DataframeAgent wrapper & plotting capture
â”‚  â”‚  â””â”€ utils.py            # CSV loading + session helpers
â”œâ”€ templates/
â”‚  â””â”€ index.html             # Frontend UI (HTML)
â”œâ”€ static/
â”‚  â”œâ”€ styles.css             # Styling for UI
â”‚  â””â”€ generated/             # Runtime: plots saved here by the server
â”œâ”€ requirements.txt
â””â”€ README.md
```

---

# Quickstart â€” Run locally

> The app is designed to be run from the project root. The server will start at `http://127.0.0.1:7860`.

## Pre-steps

1. Clone or download the repository.
2. Make sure you have Python 3.10+ installed.

## Windows (Command Prompt)

```cmd
cd path\to\ai-data-agent

REM Create and activate virtual env
python -m venv venv
venv\Scripts\activate

REM Install dependencies
pip install -r requirements.txt

REM Start the server (from project root)
python app\main.py
```

## macOS / Linux (bash / zsh)

```bash
cd /path/to/ai-data-agent

python3 -m venv venv
source venv/bin/activate

pip install -r requirements.txt

python3 app/main.py
```

After the server starts, open:
`http://127.0.0.1:7860`

---

# Usage â€” UI walkthrough

1. **Groq API Key** (top, left): paste your Groq API key (the key is stored only in memory for the session).
2. **Model selector** (top): choose from:

   * `llama-3-3-70b-instruct` (default)
   * `Gemma2-9b-It`
3. **CSV uploader** (top): choose your dataset (`.csv`) and click **Initialize Agent**.

   * The server reads the CSV and initializes a Pandas-aware LangChain agent.
4. **Chat area** (main): ask questions in natural language.

   * Example: `What are the columns present in the dataset and what is the datatype of each column?`
   * For visualizations: ask explicitly. Example: `Plot a bar chart showing value counts of df['target'].`
5. **Send button / Enter key**: sends the message. The assistant reply appears as text; if a plot was generated, it appears inline inside the assistant message.

**UI elements to note**

* `Initialize Agent` button â€” creates a per-session agent for the uploaded CSV.
* `Send` button â€” sends chat messages to the agent.
* Charts are displayed automatically when the agent executes plotting code.


---

# Example prompts

* `What columns are present and what is the datatype of each column?`
* `Show summary statistics for numeric columns.`
  <img width="1904" height="736" alt="image" src="https://github.com/user-attachments/assets/8358662c-8bdb-4cd9-a4d1-e75845df5a9d" />

* `Plot a bar chart of value counts for the 'target' column.`
* `Make a histogram of 'mean radius' with 30 bins and show mean/median values.`
* `Plot histogram for mean radius and show summary statistics.`
  <img width="1910" height="743" alt="image" src="https://github.com/user-attachments/assets/eb507589-a8ef-4db4-8785-1829cbd2213b" />

If the agent does not create a plot automatically, you can be explicit and ask:

```
Write python code (using pandas and matplotlib) to plot df['target'].value_counts().plot(kind='bar'), then print a short summary.
```

---

# How plotting works (internals)

* The agent is created with `allow_dangerous_code=True`, which allows it to run Python code (pandas, matplotlib) during execution.
* Before running the agent, the backend clears existing matplotlib figures (`plt.close('all')`).
* After the agent returns, the server checks for any matplotlib figures created (`plt.get_fignums()`), saves the **last** figure to `static/generated/plot-<uuid>.png`, and includes `image_url` in the `/chat` JSON response.
* The frontend displays this image inline using the returned `image_url` (e.g., `/static/generated/plot-XXXXX.png`).

**Important**: this approach is convenient for demos and portfolios, but executing arbitrary code on the server can be a security risk. See Security & limitations below.


---

# Extending the app (ideas)

* Return and display **multiple images** if the agent generates several figures.
* Add a **CSV preview** modal before initialization.
* Add **session export**: zip CSV + chat log + generated images.
* Integrate file storage (S3) and persistent session history.
* Add authentication and rate limits for shared demos.
* Swap Flask to a more modern frontend (React + Tailwind) while keeping the same API.

---

# Security & limitations ðŸ”’

* **API keys**: The app stores the Groq API key in memory only for the session. Do not use this project as-is in a public server without adding secure secret management.
* **allow\_dangerous\_code=True**: The agent can execute arbitrary Python code â€” this is powerful but risky. For production, run the execution in an isolated sandbox or container.
* **Plots**: The server saves plots to `/static/generated`. Clean up old images regularly if you share the server.
* **CSV size**: The app limits uploads to 20 MB by default. Large files may be slow or fail.

---

# Troubleshooting

**`TemplateNotFound: index.html`**

* Ensure you run from the project root (the folder that contains `app/`, `templates/`, and `static/`).
* Start with: `python app/main.py` (project root).

**`Error: Failed to fetch` in the browser**

* Check Flask console for a traceback.
* Open Chrome DevTools â†’ Network tab â†’ inspect `/chat` request & response.
* Make sure server is running at `http://127.0.0.1:7860` and not blocked by firewall.

**ImportError / Missing packages**

* Activate the same venv you used to install dependencies:

  ```bash
  pip install -r requirements.txt
  ```
* If any `langchain-groq` or `groq` package fails, verify pip output and install missing dependencies.

**Plot not showing**

* Ask the agent explicitly to plot (see example prompts).
* Confirm the server has write permissions for `static/generated/`. The app creates this folder at startup.

**Agent crashes while executing code**

* Look at server logs (traceback) and paste the trace here if you want help debugging.
* Large or malformed CSVs can cause pandas to raise exceptions â€” try a well-formed sample first.

---

# Contributing & support

* Fixes, improvements, and PRs are welcome.
* If you want help adding features (CSV preview, multiple plots, React frontend), I can provide detailed patches.

---


